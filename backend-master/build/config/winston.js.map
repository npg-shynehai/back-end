{"version":3,"sources":["../../src/config/winston.js"],"names":["require","_FS","existsSync","AppConf","folder","logDir","mkdirSync","transport","winston","transports","DailyRotateFile","filename","concat","file","datePattern","zippedArchive","handleExceptions","maxSize","maxFiles","on","oldFilename","newFilename","console","log","Date","logger","createLogger","exitOnError","stream","write","message","encoding","info","module","exports"],"mappings":";;AAAA;;AACA;;AACA;;;;;;AAEAA,OAAO,CAAC,2BAAD,CAAP,C,CAEA;;;AACA,IAAI,CAACC,GAAG,CAACC,UAAJ,CAAeC,qBAAQC,MAAR,CAAeC,MAA9B,CAAL,EAA4C;AAC1CJ,EAAAA,GAAG,CAACK,SAAJ,CAAcH,qBAAQC,MAAR,CAAeC,MAA7B;AACD,C,CAED;;;AACA,IAAIE,SAAS,GAAG,IAAKC,OAAO,CAACC,UAAR,CAAmBC,eAAxB,CAAyC;AAEvDC,EAAAA,QAAQ,EAAE,UAAGR,qBAAQC,MAAR,CAAeC,MAAlB,EAA2BO,MAA3B,CAAkCT,qBAAQU,IAAR,CAAaF,QAA/C,CAF6C;AAGvDG,EAAAA,WAAW,EAAEX,qBAAQU,IAAR,CAAaC,WAH6B;AAIvDC,EAAAA,aAAa,EAAEZ,qBAAQU,IAAR,CAAaE,aAJ2B;AAKvDC,EAAAA,gBAAgB,EAAEb,qBAAQU,IAAR,CAAaG,gBALwB;AAMvDC,EAAAA,OAAO,EAAEd,qBAAQU,IAAR,CAAaI,OANiC;AAOvDC,EAAAA,QAAQ,EAAEf,qBAAQU,IAAR,CAAaK;AAPgC,CAAzC,CAAhB;AAUAX,SAAS,CAACY,EAAV,CAAa,QAAb,EAAuB,UAAUC,WAAV,EAAuBC,WAAvB,EAAoC;AACzD;AACAC,EAAAA,OAAO,CAACC,GAAR,CAAY,IAAIC,IAAJ,EAAZ,EAAwBJ,WAAxB,EAAqCC,WAArC;AACD,CAHD;AAKA,IAAII,MAAM,GAAGjB,OAAO,CAACkB,YAAR,CAAqB;AAChCjB,EAAAA,UAAU,EAAE,CACVF,SADU,CADoB;AAIhCoB,EAAAA,WAAW,EAAE;AAJmB,CAArB,CAAb;AAOAF,MAAM,CAACG,MAAP,GAAgB;AACdC,EAAAA,KAAK,EAAE,eAAUC,OAAV,EAAmBC,QAAnB,EAA6B;AAClC;AACAN,IAAAA,MAAM,CAACO,IAAP,CAAYF,OAAZ;AACD;AAJa,CAAhB;AAOAG,MAAM,CAACC,OAAP,GAAiBT,MAAjB","sourcesContent":["import * as _FS from 'fs'\r\nimport AppConf from './application'\r\nimport * as winston from 'winston'\r\n\r\nrequire('winston-daily-rotate-file')\r\n\r\n// kiểm tra nếu tồn tại\r\nif (!_FS.existsSync(AppConf.folder.logDir)) {\r\n  _FS.mkdirSync(AppConf.folder.logDir)\r\n}\r\n\r\n// Cấu hình file log\r\nvar transport = new (winston.transports.DailyRotateFile)({\r\n\r\n  filename: `${AppConf.folder.logDir}`.concat(AppConf.file.filename),\r\n  datePattern: AppConf.file.datePattern,\r\n  zippedArchive: AppConf.file.zippedArchive,\r\n  handleExceptions: AppConf.file.handleExceptions,\r\n  maxSize: AppConf.file.maxSize,\r\n  maxFiles: AppConf.file.maxFiles\r\n})\r\n\r\ntransport.on('rotate', function (oldFilename, newFilename) {\r\n  // do something fun\r\n  console.log(new Date(), oldFilename, newFilename)\r\n})\r\n\r\nvar logger = winston.createLogger({\r\n  transports: [\r\n    transport\r\n  ],\r\n  exitOnError: false\r\n})\r\n\r\nlogger.stream = {\r\n  write: function (message, encoding) {\r\n    // use the 'info' log level so the output will be picked up by both transports (file and console)\r\n    logger.info(message)\r\n  }\r\n}\r\n\r\nmodule.exports = logger\r\n"],"file":"winston.js"}